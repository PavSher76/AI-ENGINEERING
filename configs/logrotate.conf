# Конфигурация ротации логов для AI Engineering проекта

# Логи Chat Service
/app/logs/chat-service.log {
    daily
    missingok
    rotate 30
    compress
    delaycompress
    notifempty
    create 644 app app
    postrotate
        # Перезапуск сервиса для переоткрытия файлов логов
        docker-compose restart chat-service
    endscript
}

/app/logs/chat-service_errors.log {
    daily
    missingok
    rotate 30
    compress
    delaycompress
    notifempty
    create 644 app app
}

# Логи QR Validation Service
/app/logs/qr-validation-service.log {
    daily
    missingok
    rotate 14
    compress
    delaycompress
    notifempty
    create 644 app app
    postrotate
        docker-compose restart qr-validation-service
    endscript
}

/app/logs/qr-validation-service_errors.log {
    daily
    missingok
    rotate 14
    compress
    delaycompress
    notifempty
    create 644 app app
}

# Логи TechExpert Connector
/app/logs/techexpert-connector.log {
    daily
    missingok
    rotate 21
    compress
    delaycompress
    notifempty
    create 644 app app
    postrotate
        docker-compose restart techexpert-connector
    endscript
}

/app/logs/techexpert-connector_errors.log {
    daily
    missingok
    rotate 21
    compress
    delaycompress
    notifempty
    create 644 app app
}

# Логи RAG Service
/app/logs/rag-service.log {
    daily
    missingok
    rotate 30
    compress
    delaycompress
    notifempty
    create 644 app app
    postrotate
        docker-compose restart rag-service
    endscript
}

/app/logs/rag-service_errors.log {
    daily
    missingok
    rotate 30
    compress
    delaycompress
    notifempty
    create 644 app app
}

# Логи Ollama Service
/app/logs/ollama-service.log {
    daily
    missingok
    rotate 14
    compress
    delaycompress
    notifempty
    create 644 app app
    postrotate
        docker-compose restart ollama-service
    endscript
}

/app/logs/ollama-service_errors.log {
    daily
    missingok
    rotate 14
    compress
    delaycompress
    notifempty
    create 644 app app
}

# Логи Outgoing Control Service
/app/logs/outgoing-control-service.log {
    daily
    missingok
    rotate 21
    compress
    delaycompress
    notifempty
    create 644 app app
    postrotate
        docker-compose restart outgoing-control-service
    endscript
}

/app/logs/outgoing-control-service_errors.log {
    daily
    missingok
    rotate 21
    compress
    delaycompress
    notifempty
    create 644 app app
}

# Общие настройки
/app/logs/*.log {
    daily
    missingok
    rotate 7
    compress
    delaycompress
    notifempty
    create 644 app app
}
