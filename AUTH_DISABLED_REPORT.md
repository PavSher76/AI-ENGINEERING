# –û—Ç—á–µ—Ç –æ–± –æ—Ç–∫–ª—é—á–µ–Ω–∏–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

## üéØ –¶–µ–ª—å
–û—Ç–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –≤–æ –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –±–µ–∑ –ø—Ä–æ–±–ª–µ–º —Å Keycloak.

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –§—Ä–æ–Ω—Ç–µ–Ω–¥ (React)
**–§–∞–π–ª:** `frontend/src/config/environment.ts`
```typescript
features: {
  enableKeycloak: false, // –û—Ç–∫–ª—é—á–µ–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
  enableAnalytics: false,
  enableDebugMode: true,
}
```

**–§–∞–π–ª:** `docker-compose.yml`
```yaml
environment:
  - REACT_APP_ENABLE_KEYCLOAK=false
```

### 2. Chat Service (Backend)
**–§–∞–π–ª:** `services/chat-service/services/keycloak_auth.py`
- –î–æ–±–∞–≤–ª–µ–Ω —Ñ–ª–∞–≥ `AUTH_DISABLED = True`
- –§—É–Ω–∫—Ü–∏—è `get_current_user()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–∞–≥–ª—É—à–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `HTTPBearer(auto_error=False)` - –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞
- –û—Ç–∫–ª—é—á–µ–Ω–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Keycloak –≤ `main.py`

**–ó–∞–≥–ª—É—à–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
```python
{
    "username": "test_user",
    "email": "test@example.com",
    "roles": ["admin", "user"],
    "client_roles": ["admin", "user"]
}
```

### 3. RAG Service (Backend)
**–§–∞–π–ª:** `services/rag-service/auth.py`
- –î–æ–±–∞–≤–ª–µ–Ω —Ñ–ª–∞–≥ `AUTH_DISABLED = True`
- –§—É–Ω–∫—Ü–∏—è `get_current_user()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–∞–≥–ª—É—à–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `HTTPBearer(auto_error=False)` - –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞

**–ó–∞–≥–ª—É—à–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
```python
User(
    id=1,
    username="test_user",
    email="test@example.com",
    is_active=True
)
```

### 4. Nginx
**–°—Ç–∞—Ç—É—Å:** –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –Ω–µ –±—ã–ª–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –≤ nginx, —Ç–æ–ª—å–∫–æ –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ Keycloak

## üß™ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –§—Ä–æ–Ω—Ç–µ–Ω–¥
- ‚úÖ **–ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:** –£—Å–ø–µ—à–Ω–æ
- ‚úÖ **JavaScript –æ—à–∏–±–∫–∏:** –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç
- ‚úÖ **–ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ Keycloak:** –ù–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç
- ‚úÖ **–ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:** "AI Engineering Platform"

### Backend API
- ‚úÖ **Chat Service:** `/health` - 200 OK
- ‚úÖ **Chat Service:** `/settings/system` - 200 OK (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)
- ‚úÖ **Chat Service:** `/settings/llm` - 200 OK (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ LLM)
- ‚úÖ **RAG Service:** `/health` - 200 OK
- ‚úÖ **RAG Service:** `/docs` - 200 OK (Swagger UI –¥–æ—Å—Ç—É–ø–µ–Ω)

### –û–±—â–∏–µ —Å–µ—Ä–≤–∏—Å—ã
- ‚úÖ **Frontend:** –î–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ https://localhost:9300
- ‚úÖ **API Gateway:** –î–æ—Å—Ç—É–ø–µ–Ω
- ‚úÖ **–í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã:** 14/15 —Ä–∞–±–æ—Ç–∞—é—Ç (–∫—Ä–æ–º–µ TechExpert Connector)

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –î–µ—Ç–∞–ª–∏ |
|-----------|--------|---------|
| –§—Ä–æ–Ω—Ç–µ–Ω–¥ | ‚úÖ | –†–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ |
| Chat Service | ‚úÖ | API –¥–æ—Å—Ç—É–ø–µ–Ω –±–µ–∑ —Ç–æ–∫–µ–Ω–æ–≤ |
| RAG Service | ‚úÖ | API –¥–æ—Å—Ç—É–ø–µ–Ω –±–µ–∑ —Ç–æ–∫–µ–Ω–æ–≤ |
| Nginx | ‚úÖ | –ü—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç |
| Keycloak | ‚ùå | –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (–æ—Ç–∫–ª—é—á–µ–Ω) |

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

**–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–æ –æ—Ç–∫–ª—é—á–µ–Ω–∞ –≤–æ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞!**

- –§—Ä–æ–Ω—Ç–µ–Ω–¥ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –±–µ–∑ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–∞ Keycloak
- Backend API endpoints –¥–æ—Å—Ç—É–ø–Ω—ã –±–µ–∑ —Ç–æ–∫–µ–Ω–æ–≤ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç
- JavaScript –æ—à–∏–±–∫–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç
- –ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

## üîß –ö–∞–∫ –≤–µ—Ä–Ω—É—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é

–î–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –æ–±—Ä–∞—Ç–Ω–æ:

1. **–§—Ä–æ–Ω—Ç–µ–Ω–¥:**
   ```typescript
   // frontend/src/config/environment.ts
   enableKeycloak: true
   ```

2. **Backend —Å–µ—Ä–≤–∏—Å—ã:**
   ```python
   # services/*/auth.py
   AUTH_DISABLED = False
   security = HTTPBearer()  # –£–±—Ä–∞—Ç—å auto_error=False
   ```

3. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã:**
   ```bash
   docker-compose restart frontend chat-service rag-service
   ```

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Ç–∫–ª—é—á–µ–Ω–Ω—É—é –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
2. **–î–ª—è production:** –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤–∫–ª—é—á–∏—Ç–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –æ–±—Ä–∞—Ç–Ω–æ
3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–∏—Ç—å—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –±–µ–∑ –ø—Ä–æ–±–ª–µ–º —Å Keycloak
4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:** –°–ª–µ–¥–∏—Ç–µ –∑–∞ –ª–æ–≥–∞–º–∏ —Å–µ—Ä–≤–∏—Å–æ–≤ –¥–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è –¥—Ä—É–≥–∏—Ö –ø—Ä–æ–±–ª–µ–º

–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–º—É —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏!
